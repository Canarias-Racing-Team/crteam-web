---
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import logoCRT from "@assets/logos-crteam/CRTEAM BLANCO.png"; // Importa la imagen
const year = new Date().getFullYear();

const links = [
  { href: "/about", label: "Sobre nosotros" },
  { href: "/contact", label: "Contacto" },
  { href: "/jobs", label: "Trabaja con nosotros" },
  { href: "/press", label: "Prensa" },
];

const socials = [
  { href: "https://twitter.com/", icon: "mdi:twitter", label: "Twitter" },
  { href: "https://youtube.com/", icon: "mdi:youtube", label: "YouTube" },
  { href: "https://facebook.com/", icon: "mdi:facebook", label: "Facebook" },
];
---

<footer
  class="bg-base-300 text-base-content flex flex-col lg:flex-row justify-center lg:justify-between items-center lg:items-start gap-8 py-12 mx-auto px-4 md:px-8 lg:px-16 xl:px-24 2xl:px-32"
  role="contentinfo"
  aria-label="Footer"
>
  <aside class="text-center lg:text-left max-w-xs">
    <Image
      src={logoCRT}
      alt="Canarias Racing Team Logo"
      width={logoCRT.width}
      height={logoCRT.height}
      class="h-8 w-auto mb-4 mx-auto lg:mx-0"
    />
    <div class="flex items-center justify-center lg:justify-start gap-2 mb-1">
      <Icon name="mdi:copyright" class="h-4 w-4" aria-label="Copyright Icon" />
      <p class="font-bold text-sm">
        {year} Canarias Racing Team
      </p>
    </div>
    <p class="text-sm opacity-75">Todos los derechos reservados</p>
    <a
      href="https://tomas2p.vercel.app"
      class="text-sm link link-hover text-gray-400 hover:text-white mt-2"
      target="_blank">Hecho por @Tomas2p</a
    >
  </aside>

  <div class="flex flex-row gap-16 lg:gap-20">
    <nav aria-label="Enlaces principales" class="text-left">
      <h6 class="text-sm font-bold uppercase mb-4 text-gray-400">Enlaces</h6>
      {
        links.map((link) => (
          <a
            class="link link-hover justify-start block text-sm mb-1"
            href={link.href}
            aria-label={link.label}
          >
            {link.label}
          </a>
        ))
      }
    </nav>

    <nav aria-label="Redes sociales" class="text-left">
      <h6 class="text-sm font-bold uppercase mb-4 text-gray-400">Síguenos</h6>
      {
        socials.map((social) => (
          <a
            class="link link-hover flex items-center justify-start text-sm mb-2 hover:text-white"
            href={social.href}
            aria-label={social.label}
            target="_blank"
            rel="noopener noreferrer"
          >
            <Icon name={social.icon} class="h-4 w-4 mr-2" />
            <span>{social.label}</span>
          </a>
        ))
      }
    </nav>
  </div>

  <form id="contact" class="text-center lg:text-left">
    <h6 class="text-sm font-bold uppercase mb-4 text-gray-400">Contáctanos</h6>
    <fieldset class="w-full max-w-xs">
      <div class="flex flex-row gap-2 join">
        <input
          id="contact-email"
          type="email"
          placeholder="tu@email.com"
          class="input join-item bg-neutral-700 border-neutral-600 text-center text-white placeholder-gray-400 w-full"
          required
        />
        <button
          type="submit"
          class="btn join-item bg-yellow-500 hover:bg-yellow-600 text-black border-none font-semibold"
          >Contactar</button
        >
      </div>
    </fieldset>
  </form>

  <script is:inline>
    document.addEventListener("DOMContentLoaded", function () {
      const contactForm = document.getElementById("contact-form");
      const emailInput = document.getElementById("contact-email");

      contactForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const userEmail = emailInput.value.trim();
        if (!userEmail) {
          alert("Por favor, introduce tu email");
          return;
        }

        // Email del equipo (cambiar por el email real del equipo)
        const teamEmail = "info@canariasracingteam.com";
        const subject = "Contacto desde la web - Canarias Racing Team";
        const body = `Hola,

Me gustaría contactar con el equipo Canarias Racing Team.

Mi email de contacto es: ${userEmail}

Un saludo.`;

        // Crear el enlace mailto
        const mailtoLink = `mailto:${teamEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

        // Abrir el cliente de correo
        window.location.href = mailtoLink;

        // Limpiar el formulario
        emailInput.value = "";
      });
    });
  </script>
</footer>
